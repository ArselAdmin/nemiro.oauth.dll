<div style="font-size:32px;margin-top:30px;margin-left:auto;margin-right:auto;width:860px;text-align:center;font-family:Lato, 'Helvetica Neue', Helvetica, Arial, sans-serif;">
	Now you will be redirected to
	<div id="redirect" style="margin-top:12px;margin-bottom:12px;color:red;font-size:18px;"></div>
	<img src="/connection.gif" />
</div>
<script type="text/javascript">
	function getParameterByName(name) {
			name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
			var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"), results = regex.exec(location.search);
			return results == null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
	}
	var returnUrl = getParameterByName('returnUrl');
	if (returnUrl != '') {
		if (getParameterByName('code') != '') {
			returnUrl += (returnUrl.indexOf('?') == - 1 ? '?' : '&');
			returnUrl += 'code=' + getParameterByName('code');
		}
		if (getParameterByName('state') != '') {
			returnUrl += (returnUrl.indexOf('?') == - 1 ? '?' : '&');
			returnUrl += 'state=' + getParameterByName('state');
		}
		if (getParameterByName('oauth_token') != '') {
			returnUrl += (returnUrl.indexOf('?') == - 1 ? '?' : '&');
			returnUrl += 'oauth_token=' + getParameterByName('oauth_token');
		}
		if (getParameterByName('oauth_verifier') != '') {
			returnUrl += (returnUrl.indexOf('?') == - 1 ? '?' : '&');
			returnUrl += 'oauth_verifier=' + getParameterByName('oauth_verifier');
		}
	}
	else {
		returnUrl = 'http://localhost:59962/Home/ExternalLoginResult' + window.location.search;
	}
	
	document.getElementById('redirect').innerHTML = returnUrl;
	window.setTimeout(function(){window.location.href = returnUrl;}, 3000);
</script>
